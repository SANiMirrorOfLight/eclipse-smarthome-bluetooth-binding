<?xml version="1.0" encoding="UTF-8"?>
<binding:binding id="bluetooth"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:binding="http://eclipse.org/smarthome/schemas/binding/v1.0.0"
        xsi:schemaLocation="http://eclipse.org/smarthome/schemas/binding/v1.0.0 http://eclipse.org/smarthome/schemas/binding-1.0.0.xsd">

    <name>Bluetooth Binding</name>
    <description><![CDATA[
        A binding for Bluetooth.<br/>
        Supports the following features:<br/>
        <ul>
            <li>Automatic discovery of bluetooth adapters and devices</li>
            <li>Managing bluetooth adapters (multiple adapters supported)</li>
            <li>Monitoring availability of bluetooth devices (whether they are in range of bluetooth adapters)</li>
            <li>Comprehensive support for BLE enabled (Bluetooth Smart) bluetooth devices. Mapping Bluetooth GATT services/characteristics/fields into openhab channels.</li>
            <li>Robustness in maintaining connectivity (automatic connection recovery)</li>
        </ul>
            ]]>
    </description>
    <author>Vlad Kolotov</author>

    <config-description>
        <parameter name="combinedAdaptersEnabled" type="boolean">
            <label>Combine adapters</label>
            <description>If selected all discovered adapters are combined into a single thing and therefore can be controlled as a single unit.</description>
            <required>true</required>
            <default>false</default>
        </parameter>
        <parameter name="combinedDevicesEnabled" type="boolean">
            <label>Combine devices</label>
            <description>If selected all discovered devices that have the same adress (discovered through different adapters) are combined into a single thing and therefore can be controlled as a single unit.</description>
            <required>true</required>
            <default>true</default>
        </parameter>
        <parameter name="extensionFolder" type="text">
            <label>GATT services and characteristics extension folder</label>
            <description><![CDATA[
                A folder on the system disk that contains your custom definitions for GATT services and characteristics for automatic recognition of bluetooth devices GATT attributes.<br/>
                See more: https://github.com/sputnikdev/bluetooth-gatt-parser<br/>
                Example: /home/pi/.bluetooth_smart]]></description>
            <required>false</required>
        </parameter>
        <parameter name="updateRate" type="integer" min="1" max="60" unit="s">
            <label>Bluetooth devices update rate</label>
            <description>How often bluetooth devices are checked/updated (seconds, default: 10s)?</description>
            <default>10</default>
            <required>true</required>
            <advanced>true</advanced>
        </parameter>
        <parameter name="initialOnlineTimeout" type="integer" min="0" unit="s">
            <label>Initial online timeout</label>
            <description>Bluetooth devices not showing any activity are considered to be offline after exceeding this timeout (seconds). Can be customized for each bluetooth device.</description>
            <default>35</default>
            <required>true</required>
        </parameter>
        <parameter name="initialConnectionControl" type="boolean">
            <label>Initial connection control</label>
            <description>If enabled, connection is kept on for newly added bluetooth devices, otherwise off. Can be customized for each Bluetooth device.</description>
            <default>true</default>
        </parameter>
        <parameter name="serialPortRegex" type="text">
            <label>Regular expression for autodiscovery of Bluegiga adapters (serial ports)</label>
            <description><![CDATA[
                WARNING! (ACHTUNG!): It is very important not to make the regular expression too wide so that ONLY Bluegiga adapters/ serial ports are matched by the regular expression. If the regular expression is too broad, this can lead to hardware malfunction/damage of other devices that are accidently matched by the regular expression. USE THIS FEATURE AT YOUR OWN RISK.<br/>
                Regular expression examples:<br/>
                <ul>
                    <li>Defining some specific serial ports (preferrable option): (/dev/ttyACM1)|(/dev/ttyACM2)</li>
                    <li>Matching all serial ports on Linux: ((/dev/ttyACM)[0-9]{1,3})</li>
                    <li>Matching all serial ports on OSX: (/dev/tty.(usbmodem).*)</li>
                    <li>Matching all serial ports on Windows: ((COM)[0-9]{1,3})</li>
                    <li>Matching all serial ports with some exclusions: (?!/dev/ttyACM0|/dev/ttyACM5)((/dev/ttyACM)[0-9]{1,3})</li>
                    <li>Default regular expression is to match nothing: (?!)</li>
                </ul>
            ]]></description>
            <default>(?!)</default>
            <verify>true</verify>
        </parameter>
        <parameter name="advancedGattServices" type="text" multiple="true" pattern="^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$">
            <label>Advanced GATT services</label>
            <description>List of GATT service UUIDs to be excluded from the automatic channel linkage. No items/channels will be automatically created for these services. Generic Access and Generic Attribute services are selected by default.</description>
            <options>
                <option value="00001800-0000-1000-8000-00805f9b34fb">00001800-0000-1000-8000-00805f9b34fb (Generic Access)</option>
                <option value="00001801-0000-1000-8000-00805f9b34fb">00001801-0000-1000-8000-00805f9b34fb (Generic Attribute)</option>
            </options>
            <limitToOptions>false</limitToOptions>
            <advanced>true</advanced>
        </parameter>
    </config-description>

</binding:binding>
